---

var imagesSrc = Astro.props.src;
var ImagesAlt = Astro.props.alt;

import { Image } from 'astro:assets';

---

<div class="relative w-full overflow-hidden p-10" id="slider">
  <div class="slide-container">
    {
      imagesSrc.map((image, index) => (
        <Image src={image} alt={ImagesAlt[index]} width={800} height={400} class="slide-image" />
      ))
    }
  </div>
</div>

<style>
 .relative {
  height: 50vh; /* Imposta l'altezza del contenitore principale */
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  overflow: hidden; /* Nascondi il contenuto in eccesso */
}

.slide-container {
  display: flex; /* Layout flex per contenere le immagini in linea */
  transition: transform 0.5s ease; /* Transizione per lo spostamento */
  width: 100%; /* Larghezza al 100% per contenere tutte le immagini */
}

.slide-image {
  flex: 0 0 auto; /* Ogni immagine occupa il 100% della larghezza del contenitore */
  padding: 30px;/* Limita la larghezza massima al 100% del contenitore */
  max-height: 100%; /* Limita l'altezza massima al 100% del contenitore */
  object-fit: contain; /* Scala l'immagine per contenere nel contesto */
  border-radius: 255px; /* Arrotonda gli angoli */
}

@media (max-width: 768px) {
  #slider {
    display: none; /* Nascondi le immagini su schermi pi√π piccoli */
  }
}

</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
  const slides = document.querySelectorAll(".slide-image");
  const slideContainer = document.querySelector(".slide-container");

  let currentIndex = 0;

  function showSlide(index) {
    const totalSlides = slides.length;
    currentIndex = (index + totalSlides) % totalSlides; // Assicura che l'indice si riavvolga
    const offset = currentIndex * -70; // Calcola l'offset corretto
    slideContainer.style.transform = `translateX(${offset}%)`;
    slideContainer.style.marginLeft = `${offset + 200}px`;
    slideContainer.style.marginRight = `${offset - 200}px`;
  }

  setInterval(() => {
    showSlide(currentIndex + 1);
  }, 3000);

  showSlide(currentIndex); // Mostra l'immagine iniziale
});

</script>
